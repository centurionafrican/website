"use client";

import Image from "next/image";
import { useEffect, useRef } from "react";
import { motion } from "framer-motion";

const Partners = () => {
  const logosContainerRef = useRef<HTMLDivElement>(null);
  const SVGLogo = ({ className = "" }) => (
    <svg 
      width="173" 
      height="52" 
      viewBox="0 0 173 52" 
      xmlns="http://www.w3.org/2000/svg" 
      className={className}
      color="#cb9275"
    >
      <path 
        d="M59.0724196 26.8163441c.2270728.7902509.0539763 1.6587813-.3033841 2.3837993-.206599.4696774-.7966159.7101075-1.2544839.4473118-.480203-.1509677-.634687-.6486022-.7314721-1.0884588-.6384094.1360574-1.0292724.6914695-1.4219966 1.161147-.5174281.6784229-1.0199661 1.3885304-1.328934 2.1899641-.1712352.4268101-.1507614 1.0474552.3294416 1.2580645.8003384.2963441 1.6714044-.0298207 2.4103215-.3634408.8357022-.4268101 1.7681895-1.0511828 1.8891709-2.0688172.0632826-.7343369.8189509-1.0642294 1.4164129-1.2990681.6607445-.2497491 1.6043993-.2087455 1.9822335.482724.2382402.61319.2903553 1.2767025.4020304 1.9215771.7612521 5.10681.1135364 10.30681-1.0478849 15.3017921-.0245952.1035741-.0488484.2076995-.0730359.312202l-.0483689.2094558c-.2987433 1.2941065-.6154739 2.6278524-1.4681045 3.6737544-.457868.5964157-1.3047378.8610752-1.985956.4901792.1693739-.9840861.8152284-1.8022939.9827411-2.7901076.878511-3.7946953 1.3419628-7.6732616 1.6937394-11.5481003.0688663-1.5078136.3368866-3.0603584-.0390863-4.5458065-.3734643.1780335-.6648716.4614577-.9525304.7506551l-.1327845.1335229c-.1774514.1776098-.3580457.351602-.5600319.4987611-1.3810491 1.1462366-3.2906938 1.532043-5.034687 1.1946953-.7016921-.1435125-1.4108291-.5032258-1.7681895-1.1518279-.4708968-.8293907-.3796955-1.8432975-.161929-2.7360574.413198-1.5674552 1.2340102-3.0118996 2.2632826-4.2531899.6979696-.8592115 1.7253807-1.4258065 2.8049069-1.6233692.8245347-.1472402 1.8612522.1956989 2.1385787 1.058638zM24.4307953.34107532c1.0776649.2311111 2.2874788.7827957 2.6560067 1.91039427.2177665.87784946.1805415 1.92903226-.4150592 2.65591398-.4839255.54609319-1.2489002.05405018-1.6583756-.33734767-.2983587-.30268101-.1945195-.6866423-.0587598-1.04959857l.0294451-.07741756c.0049438-.01283692.0098947-.02563773.0148358-.03839777l.0293927-.07603369c.0338381-.08804821.0655388-.17364202.0893163-.25518324-.4448393-.27025089-.9436548-.45476702-1.4703892-.44358423-1.6211506-.03168458-3.2050761.45103943-4.6922166 1.058638-3.1175973 1.32329749-5.995093 3.55612903-7.5120135 6.64817206-.8170897 1.7463799-1.3810491 3.8133333-.6663283 5.692043.5111285 1.4494623 1.2522152 2.7921257 2.0038544 4.1296888l.2506363.4458051c.7930129 1.4120011 1.5706211 2.8309098 2.0747818 4.376334.5490693 1.6960573.4634517 3.6344086-.3871405 5.2149104-.8431472 1.5301792-2.2483925 2.646595-3.6927242 3.5766308-2.4047377 1.5208602-5.02538068 2.6540502-7.65160742 3.7294624-.80406091.3131183-1.71979695.557276-2.56480541.2646595C.40575297 37.6301075.19915397 37.2312545 0 36.8883154v-1.1220072l.17995145-.0529598.36028623-.1062692c3.1844026-.9413681 6.41170516-1.9637049 9.14385707-3.907581 1.18561765-.8592115 2.30981385-1.9141219 2.88307955-3.2914695.3890017-.9151255.4057529-1.9998567-.0614213-2.8907527-.8952623-1.7780645-1.8370559-3.5337635-2.72301188-5.3174194-1.02927242-2.0445877-1.96734349-4.2513261-1.85380711-6.592258-.01116751-2.0352688.77055838-3.98293905 1.86125212-5.6678136 2.03993227-3.1181362 5.05143827-5.63240143 8.54873097-6.93892474 1.9357022-.68960573 4.0519458-1.04 6.0918782-.65978494zM97.9744501 26.0223656c.1786802.4994982.3257191 1.2729749-.169374 1.6308244-.1923693.0746722-.3952497.1312785-.5986209.1878799l-.1355436.0379316c-.4513213.1277577-.8940709.27531-1.2182889.6408551-.8208122.8405735-1.4945855 1.8507527-1.8798647 2.9653047-.1507614.417491-.2177665 1.0437276.2847716 1.2506093.612352.2031541 1.1744501-.2814337 1.6137056-.6486021 1.0646362-1.0157707 2.0641286-2.2048746 2.4494078-3.658638.1768189-.547957.2568528-1.1723298.6700507-1.6028674.4876481-.4529032 1.2582063-.1882437 1.6807103.2273835 2.98731 3.2560573 6.250085 6.2437276 9.328596 9.4103226v1.1275985c-.429949.1435126-.93621.2199284-1.276819-.1528315-2.773266-2.5496774-5.509306-5.1422222-8.297462-7.6769892-1.019966 1.7016487-2.1869711 3.3753405-3.7839254 4.5830824-.8971235.6728315-2.1050762 1.1536917-3.2106599.7268817-.9548224-.3224373-1.6490694-1.2506093-1.6788494-2.2626523-.0744501-1.6177778.6588832-3.1405018 1.4983079-4.4787097.7296108-1.0903226 1.5671743-2.1787814 2.7211506-2.8441577.6681895-.4118996 1.6993232-.2553405 2.0027073.5367742zm-26.193401-.6728315c.2494078 1.0288172.1153976 2.1005017-.0353638 3.1330465-.3368867 1.9234409-.8915398 3.82638-1.7849408 5.5708961-.3238579.6243728-.7445008 1.3065233-1.4759729 1.4873118-.5285956.1621506-1.3121828.1248746-1.4964467-.5069534-.161929-.3746236.0856176-.7306093.3834179-.9356272.7128596-.5311828 1.0441624-1.3922581 1.306599-2.2086022.465313-1.578638.8338409-3.2150537.7389171-4.8701075-.0241963-.6299641-.1954315-1.2412903-.2326565-1.8675269-.0260576-.501362.450423-.8461648.8673435-1.0101792.8059221-.2627957 1.5299492.4845878 1.7291032 1.207742zm-46.5015229 2.6149103c-.5807106 2.1098208-1.3419627 4.1655914-2.0790186 6.2250897-.1935702.5144086-.4113367 1.1965591-1.0441624 1.2878853-.3890017.0242293-.9622674-.0037276-1.0813875-.4659499-.1619289-.6299641-.0539763-1.2878853.0316413-1.921577.3387479-2.0222222.9641286-3.9829391 1.5671743-5.9380645.1023688-.2851613.1805414-.6299642.4746193-.7809319.9957698-.5721864 2.5703891.3969892 2.1311336 1.5935483zm57.9184433-11.0113261c-.6495769 1.2151972-1.4368866 2.3539785-2.0213198 3.6045878 2.4587141.8946236 4.9137056 1.8022939 7.396616 2.6316846.480203.1770609 1.0106598.2478853 1.4517766.5181362.4113367.4156272.2605753 1.2934767-.3182741 1.4724014-.4094755.0223656-.8133672-.0708244-1.2135364-.1435125-2.7825719-.5777778-5.48511-1.4649463-8.2285956-2.1899642-.266159 1.7724731-.4857868 3.6269534.02978 5.3770609.5788495 1.8488889 1.6509307 3.714552 3.4451777 4.6017205 1.0460237.5516846 2.2483926.2367025 3.3670051.3056631.6272419.1956989.7147208 1.1909677.0856176 1.448172-1.7607445.9524014-4.0780034.7380645-5.6656515-.4771326-1.5206429-1.1443728-2.5573604-2.8255197-3.2423011-4.5774911-.8971236-2.3260215-.9678511-4.9129749-.4802031-7.3396415-.2157889-.1001792-.4379396-.1868895-.6612829-.2708811l-.2682539-.1001729c-.4022471-.1503657-.8016603-.3058546-1.1680943-.5291611-.8077834-.5964158-.4876481-2.1620072.5993232-2.17319.878511.065233 1.6658206.5442294 2.5164128.7492474.6365482-1.4612186 1.291709-2.961577 2.369374-4.1581362.7258883-.8480287 2.7285956.1602868 2.0064297 1.2506093zM44.6737733 27.1816487c1.1651438.538638 2.2781726 1.5040861 2.5033841 2.8311112.1619289.965448.1917089 1.9979928-.1228427 2.93362-.3536379.9598567-1.9766497.7585663-2.1329949-.2385663-.1377327-.8648028.0521151-1.8544803-.5565144-2.5832258-.8989848-1.1164158-2.4978003-1.1704659-3.8081218-1.0362724-1.8128596.2553405-3.6182741.7529749-5.233841 1.6289606-.9976311.5721864-2.0138747 1.4034408-2.2260575 2.5981362-.0155104.0683394-.0284358.1397849-.0411802.2124386l-.0153603.0876428c-.0597278.3372552-.1359749.6840046-.4627488.8554741-.6086295.3522581-1.328934-.0167742-1.8072758-.4230824-.4076142-.3429391-.2903554-.9263082-.191709-1.3792115.0539121-.2149795.1125825-.4294052.1726533-.6437637l.1089145-.3858788c.2542781-.9007061.4977193-1.8053889.4815456-2.7501424-.0186126-.7977061 1.0497462-1.2245161 1.6602369-.7883871.3313028.2012903.4485617.5926882.6030456.9244444 1.4238579-1.0045878 3.085956-1.6047311 4.7536379-2.0632258 2.0548224-.5460932 4.3367175-.6821505 6.3152285.2199283zm-16.7252115-8.3908243c.288494.1416487.7109983.3876702.5974619.7753405-.1433164.7007885-.9194586 1.0139068-1.5671743 1.0083154-.9250423.0316846-1.786802.8759856-2.7230118.4193548-1.032995-.5218638-.8543148-2.3167024.3517766-2.4863082 1.0981388-.2814337 2.3005076-.1658781 3.3409476.2832975zm42.3081218-8.2696774c.2421755.4102488.6522192.5848648 1.0678469.7550582l.1385266.0568845c.3457209.1433876.6827974.3015442.9173152.6082724.3350253.4044444.4299492 1.2822939-.2438241 1.3754838-1.3605753.2217921-3.0021996-.2255197-3.6871404-1.522724-.3257191-.547957-.1433164-1.4090322.480203-1.6531899.4690356-.15283159 1.0571912-.0782796 1.3270728.380215z" 
        fill="#cb9275" 
        fillRule="evenodd"
      />
    </svg>
  );

  const logos = [
    // Alliance group companies
    "/images/kabc.svg",
    "/images/aib_logo.svg",
    
    "/images/irembo.png",
    "/images/movinpeck.png",
    "/images/green-complexe.jpg",
    // "/images/king-faysal.png",
    
    "/images/mota-engil.png",
    "/images/bion-tech.png",
    "/images/green-hills.png",
    "/images/zaria_court1.webp",
    "/images/airport.png",
    
    "/images/remco.png",
    "/images/rwandair.png",
    "/images/agri-bloom.jpg",
    "/images/kigali-golf.png",
    "/images/global-security.jpeg",
    "/images/pinnacle_hotel.png",
    // "/images/centurion-catsystems.png",
    
    "/images/kabc.svg",
    "/images/aib_logo.svg",
    "/images/irembo.png",
    "/images/movinpeck.png",
    "/images/green-complexe.jpg",
    "/images/remco.png",
  ];

  const containerVariants = {
    hidden: { opacity: 0, y: 20 },
    visible: {
      opacity: 1,
      y: 0,
      transition: {
        duration: 0.8,
        ease: "easeOut",
        staggerChildren: 0.2
      }
    }
  };

  const itemVariants = {
    hidden: { opacity: 0, y: 20 },
    visible: {
      opacity: 1,
      y: 0,
      transition: { duration: 0.6, ease: "easeOut" }
    }
  };

  const renderLogo = (src: string, index: number) => {
    if (index === 4) { 
      return (
        <div 
          key={index} 
          className="relative w-28 h-14 xl:w-32 xl:h-16 flex-shrink-0 hover:scale-110 transition-transform duration-300 flex items-center justify-center"
        >
          <SVGLogo className="max-w-full max-h-full" />
        </div>
      );
    }
    
    return (
      <div 
        key={index} 
        className="relative w-28 h-14 xl:w-32 xl:h-16 flex-shrink-0 hover:scale-110 transition-transform duration-300"
      >
        <Image
          src={src}
          alt={`Partner logo ${index + 1}`}
          fill
          sizes="(max-width: 1280px) 112px, 128px"
          style={{ objectFit: "contain" }}
        />
      </div>
    );
  };

  return (
    <motion.div 
      className="py-8 sm:py-12 md:py-16 lg:py-20 xl:py-24 w-full bg-white overflow-hidden"
      initial="hidden"
      whileInView="visible"
      viewport={{ once: true }}
      variants={containerVariants}
    >
      <div className="max-w-6xl w-full mx-auto px-4 sm:px-6 lg:px-8">
        <motion.h2 
          className="text-secondary text-2xl sm:text-3xl md:text-4xl lg:text-5xl xl:text-6xl font-semibold mb-3 sm:mb-4 leading-tight"
          variants={itemVariants}
        >
          <span className="block sm:inline">Trusted by a diverse range of</span>{' '}
          <br className="hidden sm:block" />
          <span className="text-secondary font-normal block sm:inline">clients & partners across industries</span>
        </motion.h2>
        
        <motion.p 
          className="text-gray-600 text-sm sm:text-base md:text-lg lg:w-3/4 xl:w-1/2 leading-relaxed"
          variants={itemVariants}
        >
          We are proud to serve a diverse range of clients, providing security service solutions that meet their unique needs.
        </motion.p>

        <motion.div
          className="block lg:hidden mt-6 sm:mt-8 md:mt-10"
          variants={itemVariants}
        >
          <div className="grid grid-cols-2 sm:grid-cols-3 gap-4 sm:gap-6">
            {logos.slice(0, 12).map((src, index) => {
              if (index === 0) { 
                return (
                  <div 
                    key={index} 
                    className="relative w-full h-16 sm:h-20 flex items-center justify-center"
                  >
                    <SVGLogo className="max-w-full max-h-full" />
                  </div>
                );
              }
              return (
                <div 
                  key={index} 
                  className="relative w-full h-16 sm:h-20 flex items-center justify-center"
                >
                  <Image
                    src={src}
                    alt={`Partner logo ${index + 1}`}
                    width={120}
                    height={60}
                    style={{ objectFit: "contain" }}
                    className="max-w-full max-h-full"
                  />
                </div>
              );
            })}
          </div>
        </motion.div>

        <motion.div
          className="hidden lg:block relative w-full mt-12 overflow-hidden"
          variants={itemVariants}
        >
          <motion.div
            className="flex items-center gap-10 xl:gap-12"
            animate={{ x: [0, -2000] }}
            transition={{
              x: {
                repeat: Infinity,
                repeatType: "loop",
                duration: 40,
                ease: "linear",
              },
            }}
            ref={logosContainerRef}
          >
            {logos.map((src, index) => renderLogo(src, index))}
          </motion.div>
        </motion.div>
      </div>
    </motion.div>
  );
};

export default Partners;